import 'package:magic_sdk/magic_sdk.dart';
import 'package:url_launcher/url_launcher_string.dart';
import 'package:walletconnect_dart/walletconnect_dart.dart';
import 'package:get/get.dart';
import 'package:web3dart/web3dart.dart';

class Wallet extends GetxController {
  //* Variables
  var _session;
  final magic = Magic.instance;
  final client = Web3Client.custom(Magic.instance.provider);
  final credential = MagicCredential(Magic.instance.provider);
  final String baseURI =
      "https://nftstorage.link/ipfs/bafybeianyt6td7xbqmr3ox6t7veibjpfdqznd3njsmgfm24potl3te4dsq/";

  final WalletConnect _connector = WalletConnect(
    bridge: 'https://bridge.walletconnect.org',
    clientMeta: const PeerMeta(
      name: "GNR8",
      description: "Regenerative Finance Done Right",
      url: "https://gnr8.xyz",
      icons: [
        "https://firebasestorage.googleapis.com/v0/b/gnr8dapp.appspot.com/o/logoSquarWhite.png?alt=media&token=8cd865fb-c983-4fcb-a1f3-181a1f84ca91"
      ],
    ),
  );
  int operatingChain = 80001;

  //* Methods

  Future<dynamic> loginViaMM() async {
    if (!_connector.connected) {
      try {
        _session = await _connector.createSession(onDisplayUri: (uri) async {
          await launchUrlString(uri, mode: LaunchMode.externalApplication);
        });
        String address = _session.accounts[0];
        print(address);
      } catch (e) {
        rethrow;
      }
    }
  }

  Future<dynamic> mintMembership() async {
    credential.getAccount();
    print(credential.address);
    /* final contract = DeployedContract(
        ContractAbi.fromJson(esContract.contractAbi, "mint"),
        esContract.deployedAddress);
    final mintFunction = contract.function("mint");
    var message = await client.sendTransaction(
        credential,
        Transaction.callContract(
            contract: contract, function: mintFunction, parameters: [0, 1]));
    return message; */
  }

  Future<dynamic> registerData() async {
    credential.getAccount();
    print(credential.address);
    try {
      final contract = DeployedContract(
          ContractAbi.fromJson(esContract.contractAbi, "createRegistry"),
          esContract.deployedAddress);
      final registerFunction = contract.function("createRegistry");
      var message = await client.sendTransaction(
        credential,
        Transaction.callContract(
          contract: contract,
          function: registerFunction,
          parameters: [
            1,
            0,
            "0xb14a4467c1743b2919b746affe48aa422dad51bd",
            baseURI
          ],
        ),
      );
      return message;
    } catch (e) {
      rethrow;
    }
  }

  void init() {
    _connector.on("connect", (session) {
      _session = session;
      update();
    });
    _connector.on("session_update", (session) {
      _session = session;
      update();
    });
    _connector.on("disconnect", (session) {
      _session = null;
      update();
    });
  }

  @override
  void onInit() {
    init();
    super.onInit();
  }
}

class esContract {
  static final deployedAddress =
      EthereumAddress.fromHex("0xf932C810C467e914EB2654302B48E138d58D5146");
  static const contractAbi = '''
  [
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "account",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "operator",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "bool",
				"name": "approved",
				"type": "bool"
			}
		],
		"name": "ApprovalForAll",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_uri",
				"type": "string"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "changeBaseURI",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_price",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "changePrice",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "price",
				"type": "uint256"
			},
			{
				"internalType": "address",
				"name": "contributor",
				"type": "address"
			},
			{
				"internalType": "string",
				"name": "baseURI",
				"type": "string"
			}
		],
		"name": "createRegistry",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "disburse",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "mint",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "previousOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "OwnershipTransferred",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "address",
				"name": "sender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "quantity",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "ReleaseMinted",
		"type": "event"
	},
	{
		"inputs": [],
		"name": "renounceOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256[]",
				"name": "ids",
				"type": "uint256[]"
			},
			{
				"internalType": "uint256[]",
				"name": "amounts",
				"type": "uint256[]"
			},
			{
				"internalType": "bytes",
				"name": "data",
				"type": "bytes"
			}
		],
		"name": "safeBatchTransferFrom",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			},
			{
				"internalType": "bytes",
				"name": "data",
				"type": "bytes"
			}
		],
		"name": "safeTransferFrom",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "operator",
				"type": "address"
			},
			{
				"internalType": "bool",
				"name": "approved",
				"type": "bool"
			}
		],
		"name": "setApprovalForAll",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bool",
				"name": "_newSaleActive",
				"type": "bool"
			}
		],
		"name": "setSaleState",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "operator",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256[]",
				"name": "ids",
				"type": "uint256[]"
			},
			{
				"indexed": false,
				"internalType": "uint256[]",
				"name": "values",
				"type": "uint256[]"
			}
		],
		"name": "TransferBatch",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "operator",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "TransferSingle",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "string",
				"name": "value",
				"type": "string"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			}
		],
		"name": "URI",
		"type": "event"
	},
	{
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"stateMutability": "payable",
		"type": "receive"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address[]",
				"name": "accounts",
				"type": "address[]"
			},
			{
				"internalType": "uint256[]",
				"name": "ids",
				"type": "uint256[]"
			}
		],
		"name": "balanceOfBatch",
		"outputs": [
			{
				"internalType": "uint256[]",
				"name": "",
				"type": "uint256[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "operator",
				"type": "address"
			}
		],
		"name": "isApprovedForAll",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes4",
				"name": "interfaceId",
				"type": "bytes4"
			}
		],
		"name": "supportsInterface",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			}
		],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "supply",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "uri",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
]
      ''';
  static const byteCode =
      "60806040526000600b60006101000a81548160ff0219169083151502179055503480156200002c57600080fd5b50604051806020016040528060008152506200004e816200019860201b60201c565b506001600381905550620000776200006b620001ad60201b60201c565b620001b560201b60201c565b6040518060400160405280600481526020017f474e52380000000000000000000000000000000000000000000000000000000081525060059081620000bd9190620004f5565b506040518060400160405280600481526020017f474e52380000000000000000000000000000000000000000000000000000000081525060069081620001049190620004f5565b506040518060800160405280605881526020016200424e60589139600760008081526020019081526020016000209081620001409190620004f5565b506127106009600080815260200190815260200160002081905550655af3107a400060086000808152602001908152602001600020819055506000600a600080815260200190815260200160002081905550620005dc565b8060029081620001a99190620004f5565b5050565b600033905090565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620002fd57607f821691505b602082108103620003135762000312620002b5565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026200037d7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200033e565b6200038986836200033e565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620003d6620003d0620003ca84620003a1565b620003ab565b620003a1565b9050919050565b6000819050919050565b620003f283620003b5565b6200040a6200040182620003dd565b8484546200034b565b825550505050565b600090565b6200042162000412565b6200042e818484620003e7565b505050565b5b8181101562000456576200044a60008262000417565b60018101905062000434565b5050565b601f821115620004a5576200046f8162000319565b6200047a846200032e565b810160208510156200048a578190505b620004a262000499856200032e565b83018262000433565b50505b505050565b600082821c905092915050565b6000620004ca60001984600802620004aa565b1980831691505092915050565b6000620004e58383620004b7565b9150826002028217905092915050565b62000500826200027b565b67ffffffffffffffff8111156200051c576200051b62000286565b5b620005288254620002e4565b620005358282856200045a565b600060209050601f8311600181146200056d576000841562000558578287015190505b620005648582620004d7565b865550620005d4565b601f1984166200057d8662000319565b60005b82811015620005a75784890151825560018201915060208501945060208101905062000580565b86831015620005c75784890151620005c3601f891682620004b7565b8355505b6001600288020188555050505b505050505050565b613c6280620005ec6000396000f3fe6080604052600436106101225760003560e01c8063a22cb465116100a0578063e2d204e611610064578063e2d204e6146103cb578063e985e9c5146103f4578063f242432a14610431578063f2fde38b1461045a578063f756332c1461048357610129565b8063a22cb465146102fc578063abc6fd0b14610325578063b3de019c1461033c578063bd85b03914610365578063c4e37095146103a257610129565b80632eb2c2d6116100e75780632eb2c2d6146102295780634e1273f414610252578063715018a61461028f5780638da5cb5b146102a657806395d89b41146102d157610129565b8062fdd58e1461012b57806301ffc9a71461016857806306fdde03146101a55780630e89341c146101d05780631b2ef1ca1461020d57610129565b3661012957005b005b34801561013757600080fd5b50610152600480360381019061014d91906120e5565b6104ac565b60405161015f9190612134565b60405180910390f35b34801561017457600080fd5b5061018f600480360381019061018a91906121a7565b610574565b60405161019c91906121ef565b60405180910390f35b3480156101b157600080fd5b506101ba610656565b6040516101c7919061229a565b60405180910390f35b3480156101dc57600080fd5b506101f760048036038101906101f291906122bc565b6106e4565b604051610204919061229a565b60405180910390f35b610227600480360381019061022291906122e9565b610729565b005b34801561023557600080fd5b50610250600480360381019061024b9190612526565b610937565b005b34801561025e57600080fd5b50610279600480360381019061027491906126b8565b6109d8565b60405161028691906127ee565b60405180910390f35b34801561029b57600080fd5b506102a4610af1565b005b3480156102b257600080fd5b506102bb610b05565b6040516102c8919061281f565b60405180910390f35b3480156102dd57600080fd5b506102e6610b2f565b6040516102f3919061229a565b60405180910390f35b34801561030857600080fd5b50610323600480360381019061031e9190612866565b610bbd565b005b34801561033157600080fd5b5061033a610bd3565b005b34801561034857600080fd5b50610363600480360381019061035e91906122e9565b610c1b565b005b34801561037157600080fd5b5061038c600480360381019061038791906122bc565b610c3f565b6040516103999190612134565b60405180910390f35b3480156103ae57600080fd5b506103c960048036038101906103c491906128a6565b610c5c565b005b3480156103d757600080fd5b506103f260048036038101906103ed9190612974565b610c81565b005b34801561040057600080fd5b5061041b600480360381019061041691906129f7565b610cf5565b60405161042891906121ef565b60405180910390f35b34801561043d57600080fd5b5061045860048036038101906104539190612a37565b610d89565b005b34801561046657600080fd5b50610481600480360381019061047c9190612ace565b610e2a565b005b34801561048f57600080fd5b506104aa60048036038101906104a59190612afb565b610ead565b005b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361051c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161051390612bc9565b60405180910390fd5b60008083815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b60007fd9b67a26000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061063f57507f0e89341c000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b8061064f575061064e82610eda565b5b9050919050565b6005805461066390612c18565b80601f016020809104026020016040519081016040528092919081815260200182805461068f90612c18565b80156106dc5780601f106106b1576101008083540402835291602001916106dc565b820191906000526020600020905b8154815290600101906020018083116106bf57829003601f168201915b505050505081565b60606007600083815260200190815260200160002061070283610f44565b604051602001610713929190612d1d565b6040516020818303038152906040529050919050565b610731611012565b600b60009054906101000a900460ff16610780576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161077790612d8d565b60405180910390fd5b60006009600084815260200190815260200160002054116107d6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107cd90612df9565b60405180910390fd5b600960008381526020019081526020016000205481600a6000858152602001908152602001600020546108099190612e48565b111561084a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161084190612eee565b60405180910390fd5b6008600083815260200190815260200160002054816108699190612f0e565b3410156108ab576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108a290612fc2565b60405180910390fd5b6108c633838360405180602001604052806000815250611061565b80600a600084815260200190815260200160002060008282546108e99190612e48565b925050819055507fe21e3f3ffa35882909eb26aadee18fce7c0a5b465ad776e65e080eecc255b9c333828460405161092393929190612fe2565b60405180910390a1610933611211565b5050565b61093f61121b565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff16148061098557506109848561097f61121b565b610cf5565b5b6109c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109bb9061308b565b60405180910390fd5b6109d18585858585611223565b5050505050565b60608151835114610a1e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a159061311d565b60405180910390fd5b6000835167ffffffffffffffff811115610a3b57610a3a61232e565b5b604051908082528060200260200182016040528015610a695781602001602082028036833780820191505090505b50905060005b8451811015610ae657610ab6858281518110610a8e57610a8d61313d565b5b6020026020010151858381518110610aa957610aa861313d565b5b60200260200101516104ac565b828281518110610ac957610ac861313d565b5b60200260200101818152505080610adf9061316c565b9050610a6f565b508091505092915050565b610af9611544565b610b0360006115c2565b565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60068054610b3c90612c18565b80601f0160208091040260200160405190810160405280929190818152602001828054610b6890612c18565b8015610bb55780601f10610b8a57610100808354040283529160200191610bb5565b820191906000526020600020905b815481529060010190602001808311610b9857829003601f168201915b505050505081565b610bcf610bc861121b565b8383611688565b5050565b610bdb611544565b3373ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f19350505050610c1957600080fd5b565b610c23611544565b8160086000838152602001908152602001600020819055505050565b6000600a6000838152602001908152602001600020549050919050565b610c64611544565b80600b60006101000a81548160ff02191690831515021790555050565b80600760008681526020019081526020016000209081610ca1919061334b565b5060006009600086815260200190815260200160002081905550826008600086815260200190815260200160002081905550610cef8285600160405180602001604052806000815250611061565b50505050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b610d9161121b565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161480610dd75750610dd685610dd161121b565b610cf5565b5b610e16576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e0d9061308b565b60405180910390fd5b610e2385858585856117f4565b5050505050565b610e32611544565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610ea1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e989061348f565b60405180910390fd5b610eaa816115c2565b50565b610eb5611544565b81600760008381526020019081526020016000209081610ed5919061334b565b505050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b606060006001610f5384611a8f565b01905060008167ffffffffffffffff811115610f7257610f7161232e565b5b6040519080825280601f01601f191660200182016040528015610fa45781602001600182028036833780820191505090505b509050600082602001820190505b600115611007578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8581610ffb57610ffa6134af565b5b04945060008503610fb2575b819350505050919050565b600260035403611057576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161104e9061352a565b60405180910390fd5b6002600381905550565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036110d0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110c7906135bc565b60405180910390fd5b60006110da61121b565b905060006110e785611be2565b905060006110f485611be2565b905061110583600089858589611c5c565b8460008088815260200190815260200160002060008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546111649190612e48565b925050819055508673ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f6289896040516111e29291906135dc565b60405180910390a46111f983600089858589611c64565b61120883600089898989611c6c565b50505050505050565b6001600381905550565b600033905090565b8151835114611267576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161125e90613677565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036112d6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112cd90613709565b60405180910390fd5b60006112e061121b565b90506112f0818787878787611c5c565b60005b84518110156114a15760008582815181106113115761131061313d565b5b6020026020010151905060008583815181106113305761132f61313d565b5b60200260200101519050600080600084815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050818110156113d1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113c89061379b565b60405180910390fd5b81810360008085815260200190815260200160002060008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508160008085815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546114869190612e48565b925050819055505050508061149a9061316c565b90506112f3565b508473ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb87876040516115189291906137bb565b60405180910390a461152e818787878787611c64565b61153c818787878787611e43565b505050505050565b61154c61121b565b73ffffffffffffffffffffffffffffffffffffffff1661156a610b05565b73ffffffffffffffffffffffffffffffffffffffff16146115c0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115b79061383e565b60405180910390fd5b565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036116f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016116ed906138d0565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516117e791906121ef565b60405180910390a3505050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603611863576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161185a90613709565b60405180910390fd5b600061186d61121b565b9050600061187a85611be2565b9050600061188785611be2565b9050611897838989858589611c5c565b600080600088815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490508581101561192e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016119259061379b565b60405180910390fd5b85810360008089815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508560008089815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546119e39190612e48565b925050819055508773ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628a8a604051611a609291906135dc565b60405180910390a4611a76848a8a86868a611c64565b611a84848a8a8a8a8a611c6c565b505050505050505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310611aed577a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008381611ae357611ae26134af565b5b0492506040810190505b6d04ee2d6d415b85acef81000000008310611b2a576d04ee2d6d415b85acef81000000008381611b2057611b1f6134af565b5b0492506020810190505b662386f26fc100008310611b5957662386f26fc100008381611b4f57611b4e6134af565b5b0492506010810190505b6305f5e1008310611b82576305f5e1008381611b7857611b776134af565b5b0492506008810190505b6127108310611ba7576127108381611b9d57611b9c6134af565b5b0492506004810190505b60648310611bca5760648381611bc057611bbf6134af565b5b0492506002810190505b600a8310611bd9576001810190505b80915050919050565b60606000600167ffffffffffffffff811115611c0157611c0061232e565b5b604051908082528060200260200182016040528015611c2f5781602001602082028036833780820191505090505b5090508281600081518110611c4757611c4661313d565b5b60200260200101818152505080915050919050565b505050505050565b505050505050565b611c8b8473ffffffffffffffffffffffffffffffffffffffff1661201a565b15611e3b578373ffffffffffffffffffffffffffffffffffffffff1663f23a6e6187878686866040518663ffffffff1660e01b8152600401611cd1959493929190613945565b6020604051808303816000875af1925050508015611d0d57506040513d601f19601f82011682018060405250810190611d0a91906139b4565b60015b611db257611d196139ee565b806308c379a003611d755750611d2d613a10565b80611d385750611d77565b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611d6c919061229a565b60405180910390fd5b505b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611da990613b12565b60405180910390fd5b63f23a6e6160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614611e39576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611e3090613ba4565b60405180910390fd5b505b505050505050565b611e628473ffffffffffffffffffffffffffffffffffffffff1661201a565b15612012578373ffffffffffffffffffffffffffffffffffffffff1663bc197c8187878686866040518663ffffffff1660e01b8152600401611ea8959493929190613bc4565b6020604051808303816000875af1925050508015611ee457506040513d601f19601f82011682018060405250810190611ee191906139b4565b60015b611f8957611ef06139ee565b806308c379a003611f4c5750611f04613a10565b80611f0f5750611f4e565b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f43919061229a565b60405180910390fd5b505b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f8090613b12565b60405180910390fd5b63bc197c8160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614612010576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161200790613ba4565b60405180910390fd5b505b505050505050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061207c82612051565b9050919050565b61208c81612071565b811461209757600080fd5b50565b6000813590506120a981612083565b92915050565b6000819050919050565b6120c2816120af565b81146120cd57600080fd5b50565b6000813590506120df816120b9565b92915050565b600080604083850312156120fc576120fb612047565b5b600061210a8582860161209a565b925050602061211b858286016120d0565b9150509250929050565b61212e816120af565b82525050565b60006020820190506121496000830184612125565b92915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b6121848161214f565b811461218f57600080fd5b50565b6000813590506121a18161217b565b92915050565b6000602082840312156121bd576121bc612047565b5b60006121cb84828501612192565b91505092915050565b60008115159050919050565b6121e9816121d4565b82525050565b600060208201905061220460008301846121e0565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015612244578082015181840152602081019050612229565b60008484015250505050565b6000601f19601f8301169050919050565b600061226c8261220a565b6122768185612215565b9350612286818560208601612226565b61228f81612250565b840191505092915050565b600060208201905081810360008301526122b48184612261565b905092915050565b6000602082840312156122d2576122d1612047565b5b60006122e0848285016120d0565b91505092915050565b60008060408385031215612300576122ff612047565b5b600061230e858286016120d0565b925050602061231f858286016120d0565b9150509250929050565b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61236682612250565b810181811067ffffffffffffffff821117156123855761238461232e565b5b80604052505050565b600061239861203d565b90506123a4828261235d565b919050565b600067ffffffffffffffff8211156123c4576123c361232e565b5b602082029050602081019050919050565b600080fd5b60006123ed6123e8846123a9565b61238e565b905080838252602082019050602084028301858111156124105761240f6123d5565b5b835b81811015612439578061242588826120d0565b845260208401935050602081019050612412565b5050509392505050565b600082601f83011261245857612457612329565b5b81356124688482602086016123da565b91505092915050565b600080fd5b600067ffffffffffffffff8211156124915761249061232e565b5b61249a82612250565b9050602081019050919050565b82818337600083830152505050565b60006124c96124c484612476565b61238e565b9050828152602081018484840111156124e5576124e4612471565b5b6124f08482856124a7565b509392505050565b600082601f83011261250d5761250c612329565b5b813561251d8482602086016124b6565b91505092915050565b600080600080600060a0868803121561254257612541612047565b5b60006125508882890161209a565b95505060206125618882890161209a565b945050604086013567ffffffffffffffff8111156125825761258161204c565b5b61258e88828901612443565b935050606086013567ffffffffffffffff8111156125af576125ae61204c565b5b6125bb88828901612443565b925050608086013567ffffffffffffffff8111156125dc576125db61204c565b5b6125e8888289016124f8565b9150509295509295909350565b600067ffffffffffffffff8211156126105761260f61232e565b5b602082029050602081019050919050565b600061263461262f846125f5565b61238e565b90508083825260208201905060208402830185811115612657576126566123d5565b5b835b81811015612680578061266c888261209a565b845260208401935050602081019050612659565b5050509392505050565b600082601f83011261269f5761269e612329565b5b81356126af848260208601612621565b91505092915050565b600080604083850312156126cf576126ce612047565b5b600083013567ffffffffffffffff8111156126ed576126ec61204c565b5b6126f98582860161268a565b925050602083013567ffffffffffffffff81111561271a5761271961204c565b5b61272685828601612443565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b612765816120af565b82525050565b6000612777838361275c565b60208301905092915050565b6000602082019050919050565b600061279b82612730565b6127a5818561273b565b93506127b08361274c565b8060005b838110156127e15781516127c8888261276b565b97506127d383612783565b9250506001810190506127b4565b5085935050505092915050565b600060208201905081810360008301526128088184612790565b905092915050565b61281981612071565b82525050565b60006020820190506128346000830184612810565b92915050565b612843816121d4565b811461284e57600080fd5b50565b6000813590506128608161283a565b92915050565b6000806040838503121561287d5761287c612047565b5b600061288b8582860161209a565b925050602061289c85828601612851565b9150509250929050565b6000602082840312156128bc576128bb612047565b5b60006128ca84828501612851565b91505092915050565b600067ffffffffffffffff8211156128ee576128ed61232e565b5b6128f782612250565b9050602081019050919050565b6000612917612912846128d3565b61238e565b90508281526020810184848401111561293357612932612471565b5b61293e8482856124a7565b509392505050565b600082601f83011261295b5761295a612329565b5b813561296b848260208601612904565b91505092915050565b6000806000806080858703121561298e5761298d612047565b5b600061299c878288016120d0565b94505060206129ad878288016120d0565b93505060406129be8782880161209a565b925050606085013567ffffffffffffffff8111156129df576129de61204c565b5b6129eb87828801612946565b91505092959194509250565b60008060408385031215612a0e57612a0d612047565b5b6000612a1c8582860161209a565b9250506020612a2d8582860161209a565b9150509250929050565b600080600080600060a08688031215612a5357612a52612047565b5b6000612a618882890161209a565b9550506020612a728882890161209a565b9450506040612a83888289016120d0565b9350506060612a94888289016120d0565b925050608086013567ffffffffffffffff811115612ab557612ab461204c565b5b612ac1888289016124f8565b9150509295509295909350565b600060208284031215612ae457612ae3612047565b5b6000612af28482850161209a565b91505092915050565b60008060408385031215612b1257612b11612047565b5b600083013567ffffffffffffffff811115612b3057612b2f61204c565b5b612b3c85828601612946565b9250506020612b4d858286016120d0565b9150509250929050565b7f455243313135353a2061646472657373207a65726f206973206e6f742061207660008201527f616c6964206f776e657200000000000000000000000000000000000000000000602082015250565b6000612bb3602a83612215565b9150612bbe82612b57565b604082019050919050565b60006020820190508181036000830152612be281612ba6565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680612c3057607f821691505b602082108103612c4357612c42612be9565b5b50919050565b600081905092915050565b60008190508160005260206000209050919050565b60008154612c7681612c18565b612c808186612c49565b94506001821660008114612c9b5760018114612cb057612ce3565b60ff1983168652811515820286019350612ce3565b612cb985612c54565b60005b83811015612cdb57815481890152600182019150602081019050612cbc565b838801955050505b50505092915050565b6000612cf78261220a565b612d018185612c49565b9350612d11818560208601612226565b80840191505092915050565b6000612d298285612c69565b9150612d358284612cec565b91508190509392505050565b7f53616c65206e6f74206163746976650000000000000000000000000000000000600082015250565b6000612d77600f83612215565b9150612d8282612d41565b602082019050919050565b60006020820190508181036000830152612da681612d6a565b9050919050565b7f546869732072656c6561736520646f6573206e6f742065786973742e00000000600082015250565b6000612de3601c83612215565b9150612dee82612dad565b602082019050919050565b60006020820190508181036000830152612e1281612dd6565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000612e53826120af565b9150612e5e836120af565b9250828201905080821115612e7657612e75612e19565b5b92915050565b7f546869732072656c656173652068617320726561636865642069742773206c6960008201527f6d6974656420737570706c792100000000000000000000000000000000000000602082015250565b6000612ed8602d83612215565b9150612ee382612e7c565b604082019050919050565b60006020820190508181036000830152612f0781612ecb565b9050919050565b6000612f19826120af565b9150612f24836120af565b9250828202612f32816120af565b91508282048414831517612f4957612f48612e19565b5b5092915050565b7f54686520616d6f756e742073656e7420646f65736e277420636f76657220746860008201527f6520707269636520666f72207468652061737365740000000000000000000000602082015250565b6000612fac603583612215565b9150612fb782612f50565b604082019050919050565b60006020820190508181036000830152612fdb81612f9f565b9050919050565b6000606082019050612ff76000830186612810565b6130046020830185612125565b6130116040830184612125565b949350505050565b7f455243313135353a2063616c6c6572206973206e6f7420746f6b656e206f776e60008201527f6572206f7220617070726f766564000000000000000000000000000000000000602082015250565b6000613075602e83612215565b915061308082613019565b604082019050919050565b600060208201905081810360008301526130a481613068565b9050919050565b7f455243313135353a206163636f756e747320616e6420696473206c656e67746860008201527f206d69736d617463680000000000000000000000000000000000000000000000602082015250565b6000613107602983612215565b9150613112826130ab565b604082019050919050565b60006020820190508181036000830152613136816130fa565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6000613177826120af565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036131a9576131a8612e19565b5b600182019050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026132017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826131c4565b61320b86836131c4565b95508019841693508086168417925050509392505050565b6000819050919050565b600061324861324361323e846120af565b613223565b6120af565b9050919050565b6000819050919050565b6132628361322d565b61327661326e8261324f565b8484546131d1565b825550505050565b600090565b61328b61327e565b613296818484613259565b505050565b5b818110156132ba576132af600082613283565b60018101905061329c565b5050565b601f8211156132ff576132d081612c54565b6132d9846131b4565b810160208510156132e8578190505b6132fc6132f4856131b4565b83018261329b565b50505b505050565b600082821c905092915050565b600061332260001984600802613304565b1980831691505092915050565b600061333b8383613311565b9150826002028217905092915050565b6133548261220a565b67ffffffffffffffff81111561336d5761336c61232e565b5b6133778254612c18565b6133828282856132be565b600060209050601f8311600181146133b557600084156133a3578287015190505b6133ad858261332f565b865550613415565b601f1984166133c386612c54565b60005b828110156133eb578489015182556001820191506020850194506020810190506133c6565b868310156134085784890151613404601f891682613311565b8355505b6001600288020188555050505b505050505050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b6000613479602683612215565b91506134848261341d565b604082019050919050565b600060208201905081810360008301526134a88161346c565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f5265656e7472616e637947756172643a207265656e7472616e742063616c6c00600082015250565b6000613514601f83612215565b915061351f826134de565b602082019050919050565b6000602082019050818103600083015261354381613507565b9050919050565b7f455243313135353a206d696e7420746f20746865207a65726f2061646472657360008201527f7300000000000000000000000000000000000000000000000000000000000000602082015250565b60006135a6602183612215565b91506135b18261354a565b604082019050919050565b600060208201905081810360008301526135d581613599565b9050919050565b60006040820190506135f16000830185612125565b6135fe6020830184612125565b9392505050565b7f455243313135353a2069647320616e6420616d6f756e7473206c656e6774682060008201527f6d69736d61746368000000000000000000000000000000000000000000000000602082015250565b6000613661602883612215565b915061366c82613605565b604082019050919050565b6000602082019050818103600083015261369081613654565b9050919050565b7f455243313135353a207472616e7366657220746f20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b60006136f3602583612215565b91506136fe82613697565b604082019050919050565b60006020820190508181036000830152613722816136e6565b9050919050565b7f455243313135353a20696e73756666696369656e742062616c616e636520666f60008201527f72207472616e7366657200000000000000000000000000000000000000000000602082015250565b6000613785602a83612215565b915061379082613729565b604082019050919050565b600060208201905081810360008301526137b481613778565b9050919050565b600060408201905081810360008301526137d58185612790565b905081810360208301526137e98184612790565b90509392505050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b6000613828602083612215565b9150613833826137f2565b602082019050919050565b600060208201905081810360008301526138578161381b565b9050919050565b7f455243313135353a2073657474696e6720617070726f76616c2073746174757360008201527f20666f722073656c660000000000000000000000000000000000000000000000602082015250565b60006138ba602983612215565b91506138c58261385e565b604082019050919050565b600060208201905081810360008301526138e9816138ad565b9050919050565b600081519050919050565b600082825260208201905092915050565b6000613917826138f0565b61392181856138fb565b9350613931818560208601612226565b61393a81612250565b840191505092915050565b600060a08201905061395a6000830188612810565b6139676020830187612810565b6139746040830186612125565b6139816060830185612125565b8181036080830152613993818461390c565b90509695505050505050565b6000815190506139ae8161217b565b92915050565b6000602082840312156139ca576139c9612047565b5b60006139d88482850161399f565b91505092915050565b60008160e01c9050919050565b600060033d1115613a0d5760046000803e613a0a6000516139e1565b90505b90565b600060443d10613a9d57613a2261203d565b60043d036004823e80513d602482011167ffffffffffffffff82111715613a4a575050613a9d565b808201805167ffffffffffffffff811115613a685750505050613a9d565b80602083010160043d038501811115613a85575050505050613a9d565b613a948260200185018661235d565b82955050505050505b90565b7f455243313135353a207472616e7366657220746f206e6f6e2d4552433131353560008201527f526563656976657220696d706c656d656e746572000000000000000000000000602082015250565b6000613afc603483612215565b9150613b0782613aa0565b604082019050919050565b60006020820190508181036000830152613b2b81613aef565b9050919050565b7f455243313135353a204552433131353552656365697665722072656a6563746560008201527f6420746f6b656e73000000000000000000000000000000000000000000000000602082015250565b6000613b8e602883612215565b9150613b9982613b32565b604082019050919050565b60006020820190508181036000830152613bbd81613b81565b9050919050565b600060a082019050613bd96000830188612810565b613be66020830187612810565b8181036040830152613bf88186612790565b90508181036060830152613c0c8185612790565b90508181036080830152613c20818461390c565b9050969550505050505056fea26469706673582212207755de2eccdd83a589deb7eae5d075ffc5462c076f76e43e1363af1a749cdeea64736f6c6343000812003368747470733a2f2f6e667473746f726167652e6c696e6b2f697066732f62616679626569683778697a37737a71776c6c68746265666a326b736e7a376b377065637777356d737a6133736c6632727a6377667668757a6c65";
}
